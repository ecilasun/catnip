// GrimR language test file
var cursorX, cursorY, VRAM=0x80000000;
var banana[16], tree[] = {1,2,3,4};
var sprite[32] = {
    0xFFFFFFFA,0xFFFFFFFB,0xFFFFFFFC,0xFFFFFFFD,
    0xFFFFFFFE,0xFFFFFFFF,0xFFFFFF00,0xFFFFFF01,
    0xFFFFFFFA,0xFFFFFFFB,0xFFFFFFFC,0xFFFFFFFD,
    0xFFFFFFFA,0xFFFFFFFB,0xFFFFFFFC,0xFFFFFFFD,
    0xFFFFFFFA,0xF00FFFFB,0xFFFFFFFC,0xFFFFFFFD,
    0xFFFFFFFA,0xFFFFFFFB,0xFF222FFC,0xFFFFFFFD,
    0xFFFFFFFA,0xFFFFFFFB,0xFFFFFFFC,0xFFFFFFFD,
    0xFFFFFFFA,0xFFFFFFFB,0xFFFFFFFC,0xFFEDCAFD };

def test()
{
    return;
}

def DrawRect(posX, posY, width, height)
{
    var spanX, spanY;

    spanY = posY;
    while (spanY<posY+height)
    {
        spanX = posX;
        while (spanX<posX+width)
        {
            // GrimR feature: Array operator can alias a variable as a pointer at that address if used on a non-array integer.
            VRAM[spanX + spanY*320] = 12;
            spanX = spanX+1;
        }
        spanY = spanY+1;
    }
}

def main()
{
    if (cursorY > 2)
    {
        DrawRect(0,0,512+3-cursorY,384);
    }
    else
    {
        cursorY = 1;
    }
}
